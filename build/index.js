!function(){"use strict";var e=window.wp.blocks,t=window.wp.element,n=window.wp.i18n,o=window.wp.data,l=window.wp.blockEditor,r=window.wp.components;function c(e){if(2===e.length)return e.reverse();let t,n=e.length;for(;0!=n;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e}(0,e.registerBlockType)("wpblockbuddy/controlled-content",{edit:function(e){const{attributes:s,setAttributes:a,clientId:i,isSelected:d}=e,{allowedBlocks:u,instructions:p}=s,w=wpBlockBuddyControlledContent.hasOwnProperty("blockChoices")?wpBlockBuddyControlledContent.blockChoices:{paragraph:"core/paragraph",heading:"core/heading",image:"core/image",list:"core/list"},k=Object.keys(w),m=(0,o.useSelect)((e=>e("core/block-editor").hasSelectedInnerBlock(i,!0)))||d,b=0===(0,o.useSelect)((e=>e("core/block-editor").getBlock(i))).innerBlocks.length,B=wpBlockBuddyControlledContent.userCanView,h=(e=>e.map((e=>{return t=w,n=e,Object.keys(t).find((e=>t[e]===n));var t,n})))(u);return(0,t.createElement)(t.Fragment,null,B&&(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(r.PanelBody,{title:(0,n.__)("Allowed Blocks","wpblockbuddy"),initialOpen:!0},(0,t.createElement)(r.PanelRow,null,(0,t.createElement)("p",null,(0,n.__)("Restrict the content area to the following blocks:","wpblockbuddy"))),(0,t.createElement)(r.FormTokenField,{value:h,suggestions:k,onChange:e=>{const t=e.map((e=>w[e]));a({allowedBlocks:t})}}),(0,t.createElement)(r.TextControl,{label:(0,n.__)("Placeholder","wpblockbuddy"),help:(0,n.__)("Use to provide instruction on the purpose of this section","wpblockbuddy"),value:p,onChange:e=>a({instructions:e})}))),(0,t.createElement)("div",(0,l.useBlockProps)(),b&&(0,t.createElement)("p",{className:"instructions"},p),(0,t.createElement)(l.InnerBlocks,{allowedBlocks:c(u),renderAppender:!!m&&l.InnerBlocks.ButtonBlockAppender,templateLock:!1})))},save:function(){return(0,t.createElement)("div",l.useBlockProps.save(),(0,t.createElement)(l.InnerBlocks.Content,null))}})}();